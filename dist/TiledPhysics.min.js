!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("TiledPhysics",[],t):"object"==typeof exports?exports.TiledPhysics=t():e.TiledPhysics=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(6);Object.defineProperty(t,"adjacent",{enumerable:!0,get:function(){return n(o).default}});var r=i(7);Object.defineProperty(t,"C",{enumerable:!0,get:function(){return n(r).default}});var s=i(8);Object.defineProperty(t,"direction",{enumerable:!0,get:function(){return n(s).default}});var a=i(9);Object.defineProperty(t,"down",{enumerable:!0,get:function(){return n(a).default}});var l=i(10);Object.defineProperty(t,"left",{enumerable:!0,get:function(){return n(l).default}});var u=i(11);Object.defineProperty(t,"right",{enumerable:!0,get:function(){return n(u).default}});var c=i(12);Object.defineProperty(t,"up",{enumerable:!0,get:function(){return n(c).default}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(18);Object.defineProperty(t,"getOverlapX",{enumerable:!0,get:function(){return n(o).default}});var r=i(19);Object.defineProperty(t,"getOverlapY",{enumerable:!0,get:function(){return n(r).default}});var s=i(20);Object.defineProperty(t,"separateX",{enumerable:!0,get:function(){return n(s).default}});var a=i(21);Object.defineProperty(t,"separateY",{enumerable:!0,get:function(){return n(a).default}});var l=i(22);Object.defineProperty(t,"intersects",{enumerable:!0,get:function(){return n(l).default}})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(0),s=function(){function e(t,i){n(this,e),this.world=t,this.gameObject=i,this.enable=!0,this.offset=new Phaser.Math.Vector2,this.position=new Phaser.Math.Vector2(i.x,i.y),this.prev=new Phaser.Math.Vector2(i.x,i.y),this.tile=new Phaser.Math.Vector2(Math.floor(this.position.x/this.world.tilesize.x),Math.floor(this.position.y/this.world.tilesize.y)),this.width=this.world.tilesize.x,this.height=this.world.tilesize.y,this.velocity=new Phaser.Math.Vector2,this.newVelocity=new Phaser.Math.Vector2,this.acceleration=new Phaser.Math.Vector2,this.bounce=new Phaser.Math.Vector2,this.friction=new Phaser.Math.Vector2(1,1),this.mass=1,this.facing=r.C.DOWN,this.immovable=!1,this.moves=!0,this.dirty=!1,this.isOnTile=!0}return o(e,[{key:"update",value:function(e){if(this.dirty=!0,this.isOnTile=!1,this.moves){this.velocity.x+=this.acceleration.x*e,this.velocity.y+=this.acceleration.y*e,this.newVelocity.x=this.velocity.x*e,this.newVelocity.y=this.velocity.y*e;var t={};t.x=this.position.x+this.newVelocity.x,t.y=this.position.y+this.newVelocity.y;var i=this.world.tilesize.x;Math.floor(t.x/i)>Math.floor(this.position.x/i)?(this.tile.x=Math.floor(t.x/i),this.position.x=this.tile.x*i,this.isOnTile=!0):Math.ceil(t.x/i)<Math.ceil(this.position.x/i)?(this.tile.x=Math.ceil(t.x/i),this.position.x=this.tile.x*i,this.isOnTile=!0):this.position.x=t.x;var n=this.world.tilesize.x;Math.floor(t.y/n)>Math.floor(this.position.y/n)?(this.tile.y=Math.floor(t.y/n),this.position.y=this.tile.y*n,this.isOnTile=!0):Math.ceil(t.y/n)<Math.ceil(this.position.y/n)?(this.tile.y=Math.ceil(t.y/n),this.position.y=this.tile.y*n,this.isOnTile=!0):this.position.y=t.y,0===this.velocity.x&&0===this.velocity.y||(this.facing=(0,r.direction)(this.velocity.x,this.velocity.y))}}},{key:"postUpdate",value:function(){this.enable&&this.dirty&&(this.dirty=!1,this.gameObject.x=this.position.x+this.gameObject.width/2-this.offset.x,this.gameObject.y=this.position.y+this.gameObject.height/2-this.offset.y,this.prev.x=this.position.x,this.prev.y=this.position.y)}},{key:"heading",value:function(){return 0===this.velocity.x&&0===this.velocity.y||(this.facing=(0,r.direction)(this.velocity.x,this.velocity.y)),this.facing}},{key:"setOffset",value:function(e,t){return this.offset.set(e,t),this}},{key:"setSize",value:function(e,t){return this.width=e,this.height=t,this}},{key:"reset",value:function(e,t){this.stop(),this.gameObject.setPosition(e,t),this.gameObject.getTopLeft(this.position),this.prev.copy(this.position)}},{key:"stop",value:function(){return this.velocity.set(0,0),this.acceleration.set(0,0),this}},{key:"deltaAbsX",value:function(){return this.deltaX()>0?this.deltaX():-this.deltaX()}},{key:"deltaAbsY",value:function(){return this.deltaY()>0?this.deltaY():-this.deltaY()}},{key:"deltaX",value:function(){return this.position.x-this.prev.x}},{key:"deltaY",value:function(){return this.position.y-this.prev.y}},{key:"destroy",value:function(){this.enable=!1,this.world.pendingDestroy.set(this)}},{key:"setVelocity",value:function(e,t){return this.velocity.set(e,t),this}},{key:"setVelocityX",value:function(e){return this.velocity.x=e,this}},{key:"setVelocityY",value:function(e){return this.velocity.y=e,this}},{key:"setAcceleration",value:function(e,t){return this.acceleration.set(e,t),this}},{key:"setAccelerationX",value:function(e){return this.acceleration.x=e,this}},{key:"setAccelerationY",value:function(e){return this.acceleration.y=e,this}},{key:"setImmovable",value:function(e){return this.immovable=e,this}},{key:"lineUp",value:function(){return this.position.x=this.world.tilesize.x*this.tile.x,this.position.y=this.world.tilesize.y*this.tile.y,this}},{key:"lineUpX",value:function(){return this.position.x=this.world.tilesize.x*this.tile.x,this}},{key:"lineUpY",value:function(){return this.position.y=this.world.tilesize.y*this.tile.y,this}},{key:"x",get:function(){return this.position.x},set:function(e){this.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.position.y=e}},{key:"left",get:function(){return this.position.x}},{key:"right",get:function(){return this.position.x+this.width}},{key:"top",get:function(){return this.position.y}},{key:"bottom",get:function(){return this.position.y+this.height}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){n(this,e),this.tilemap=t,this.data=[],this.tileset=new Phaser.Structs.Map,this.undefinedId=-1,this.undefinedProps={}}return o(e,[{key:"tileAt",value:function(e,t){return this.data[e]&&this.data[e][t]?this.data[e][t]:this.undefinedId}},{key:"propertiesOf",value:function(e,t){return this.tileset.get(this.tileAt(e,t))||this.undefinedProps}}]),e}();t.default=r},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(5),a=n(s),l=i(23),u=n(l),c=function(){function e(t){o(this,e),Phaser.Physics.TiledPhysics=this,this.scene=t,t.physics=this,this.world=void 0,this.add=void 0,this.systems=t.sys,t.sys.events.once("boot",this.boot,this)}return r(e,[{key:"boot",value:function(){this.world||(this.world=new a.default(this.scene,this.systems.game.config.physics.tiled),this.add=new u.default(this.world));var e=this.systems.events;e.on("update",this.world.update,this.world),e.on("postupdate",this.world.postUpdate,this.world),e.once("shutdown",this.shutdown,this),e.once("destroy",this.destroy,this)}},{key:"shutdown",value:function(){}},{key:"destroy",value:function(){this.shutdown(),this.scene.sys.events.off("start",this.start,this),this.scene=void 0}}]),e}();c.register=function(e){e.register("TiledPhysics",c,"TiledPhysics")},e.exports=c},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),a=n(s),l=i(13),u=n(l),c=i(3),f=n(c),h=i(17),d=n(h),y=function(){function e(t,i){o(this,e),i||(i={}),this.scene=t,this.bodies=new Phaser.Structs.Set,this.tilemap=new u.default(this),this.tilesize=new Phaser.Math.Vector2(i.tileWidth,i.tileHeight),this.pendingDestroy=new Phaser.Structs.Set,this.colliders=new Phaser.Structs.ProcessQueue,this.isPaused=!1}return r(e,[{key:"enable",value:function(e){var t=new f.default(this.tilemap),i={},n={},o=-1;switch(e.type){case"Sprite":return e.body=new a.default(this,e),this.bodies.set(e.body),e.body;case"StaticTilemapLayer":t.data=[];for(var r=0;r<e.layer.width;r+=1){t.data[r]=[];for(var s=0;s<e.layer.height;s+=1)t.data[r][s]=e.layer.data[s][r].index}n=Object.keys(e.tileset.tileProperties);for(var l in n)i=e.tileset.firstgid,o=Number(n[l])+Number(i),t.tileset.set(o,e.tileset.tileProperties[n[l]]);return this.tilemap.layers.set(t),t}}},{key:"disable",value:function(e){e.enable=!1}},{key:"pause",value:function(){return this.isPaused=!0,this}},{key:"resume",value:function(){return this.isPaused=!1,this}},{key:"addCollider",value:function(e,t){var i=new d.default(this,e,t);return this.colliders.add(i),i}},{key:"removeCollider",value:function(e){return this.colliders.remove(e),this}},{key:"update",value:function(e,t){var i=this;this.isPaused||0===this.bodies.size||(this.delta=t/1e3,this.bodies.each(function(e){e.enable&&(i.tilemap.modify(e),e.update(i.delta))}),this.colliders.update().forEach(function(e){e.active&&e.update()}))}},{key:"postUpdate",value:function(){this.bodies.each(function(e){e.enable&&e.postUpdate()})}}]),e}();t.default=y},function(e,t,i){"use strict";function n(e,t,i){switch(i){case o.C.DOWN:return(0,o.down)(e,t);case o.C.LEFT:return(0,o.left)(e,t);case o.C.RIGHT:return(0,o.right)(e,t);case o.C.UP:return(0,o.up)(e,t);case o.C.DOWN_LEFT:return(0,o.down)((0,o.left)(e,t).tx,(0,o.left)(e,t).ty);case o.C.DOWN_RIGHT:return(0,o.down)((0,o.right)(e,t).tx,(0,o.right)(e,t).ty);case o.C.UP_LEFT:return(0,o.up)((0,o.left)(e,t).tx,(0,o.left)(e,t).ty);case o.C.UP_RIGHT:return(0,o.up)((0,o.right)(e,t).tx,(0,o.right)(e,t).ty);default:return{}}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);/**
   * @author
   * @copyright
   * @license
   */
t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});/**
 * @author
 * @copyright
 * @license
 */
var n={DOWN:0,LEFT:1,RIGHT:2,UP:3,DOWN_LEFT:4,DOWN_RIGHT:6,UP_LEFT:7,UP_RIGHT:8};t.default=n},function(e,t,i){"use strict";function n(e,t){return t>0&&0===e?o.C.DOWN:e<0&&0===t?o.C.LEFT:e>0&&0===t?o.C.RIGHT:t<0&&0===e?o.C.UP:e<0&&t>0?o.C.DOWN_LEFT:e>0&&t>0?o.C.DOWN_RIGHT:e<0&&t<0?o.C.UP_LEFT:e>0&&t<0?o.C.UP_RIGHT:-1}Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);/**
   * @author
   * @copyright
   * @license
   */
t.default=n},function(e,t,i){"use strict";/**
 * @author
 * @copyright
 * @license
 */
function n(e,t){return{tx:e,ty:t+1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";/**
 * @author
 * @copyright
 * @license
 */
function n(e,t){return{tx:e-1,ty:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";/**
 * @author
 * @copyright
 * @license
 */
function n(e,t){return{tx:e+1,ty:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";/**
 * @author
 * @copyright
 * @license
 */
function n(e,t){return{tx:e,ty:t-1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(14),a=n(s),l=i(15),u=n(l),c=i(16),f=n(c),h=function(){function e(t){o(this,e),this.world=t,this.layers=new Phaser.Structs.Set,this.modifiers=new Phaser.Structs.ProcessQueue}return r(e,[{key:"addModifier",value:function(e){this.modifiers.add(e)}},{key:"removeModifier",value:function(e){return this.modifiers.remove(e),this}},{key:"addCollision",value:function(e,t){this.modifiers.add(new a.default(e,t))}},{key:"addForce",value:function(e,t){this.modifiers.add(new u.default(e,t)),this.modify(e)}},{key:"addInertia",value:function(e,t){this.modifiers.add(new f.default(e,t)),this.modify(e)}},{key:"modify",value:function(e){this.modifiers.update().forEach(function(t){t.body===e&&t.execute()})}}]),e}();t.default=h},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(0),s=function(){function e(t,i){n(this,e),this.body=t,this.layers=i}return o(e,[{key:"execute",value:function(){for(var e={tx:this.body.tile.x,ty:this.body.tile.y},t=(0,r.adjacent)(this.body.tile.x,this.body.tile.y,this.body.heading()),i=0;i<this.layers.length;i++){var n=this.layers[i].propertiesOf(e.tx,e.ty),o=this.layers[i].propertiesOf(t.tx,t.ty);e.ty===t.ty-1?(n.inCollideDown||o.outCollideUp||o.collide)&&(this.body.velocity.y>0&&(this.body.velocity.y=0),this.body.acceleration.y>0&&(this.body.acceleration.y=0)):e.ty===t.ty+1&&(n.inCollideUp||o.outCollideDown||o.collide)&&(this.body.velocity.y<0&&(this.body.velocity.y=0),this.body.acceleration.y<0&&(this.body.acceleration.y=0)),e.tx===t.tx+1?(n.inCollideLeft||o.outCollideRight||o.collide)&&(this.body.velocity.x<0&&(this.body.velocity.x=0),this.body.acceleration.x<0&&(this.body.acceleration.x=0)):e.tx===t.tx-1&&(n.inCollideRight||o.outCollideLeft||o.collide)&&(this.body.velocity.x>0&&(this.body.velocity.x=0),this.body.acceleration.x>0&&(this.body.acceleration.x=0))}}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=(i(0),function(){function e(t,i){n(this,e),this.body=t,this.layers=i}return o(e,[{key:"execute",value:function(){if(this.body.isOnTile){var e={tx:this.body.tile.x,ty:this.body.tile.y},t=0,i=0;this.layers.forEach(function(n){var o=n.propertiesOf(e.tx,e.ty);o&&(t+=o.forceX?o.forceX:0,i+=o.forceY?o.forceY:0)}),this.body.acceleration.x=t,this.body.acceleration.y=i}}}]),e}());t.default=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t,i){n(this,e),this.body=t,this.layers=i}return o(e,[{key:"execute",value:function(){if(this.body.isOnTile)for(var e=0;e<this.layers.length;e++){var t={tx:this.body.tile.x,ty:this.body.tile.y},i=this.layers[e].propertiesOf(t.tx,t.ty);i.inertia||(i.inertia=0),this.body.velocity.x=i.inertia*this.body.velocity.x,this.body.velocity.y=i.inertia*this.body.velocity.y,this.body.acceleration.x=i.inertia*this.body.acceleration.x,this.body.acceleration.y=i.inertia*this.body.acceleration.y,this.body.sliding=i.friction>0}}}]),e}();t.default=r},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(1),s=function(){function e(t,i,o){n(this,e),this.world=t,this.body1=i,this.body2=o,this.active=!0}return o(e,[{key:"update",value:function(){0!==this.body1.deltaX()?(0,r.intersects)(this.body1,this.body2)&&((0,r.separateX)(this.body1,this.body2,!1,0),(0,r.intersects)(this.body1,this.body2)&&(0,r.separateY)(this.body1,this.body2,!1,0)):(0,r.intersects)(this.body1,this.body2)&&((0,r.separateY)(this.body1,this.body2,!1,0),(0,r.intersects)(this.body1,this.body2)&&(0,r.separateX)(this.body1,this.body2,!1,0))}},{key:"destroy",value:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null}}]),e}();t.default=s},function(e,t,i){"use strict";/**
 * @author
 * @copyright
 * @license
 */
function n(e,t,i,n){var o=0,r=e.deltaAbsX()+t.deltaAbsX()+n;return 0===e.deltaX()&&0===t.deltaX()||(e.deltaX()>t.deltaX()?(o=e.right-t.x)>r&&!i&&(o=0):e.deltaX()<t.deltaX()&&-(o=e.x-t.width-t.x)>r&&!i&&(o=0)),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";/**
 * @author
 * @copyright
 * @license
 */
function n(e,t,i,n){var o=0,r=e.deltaAbsY()+t.deltaAbsY()+n;return 0===e.deltaY()&&0===t.deltaY()||(e.deltaY()>t.deltaY()?(o=e.bottom-t.y)>r&&!i&&(o=0):e.deltaY()<t.deltaY()&&-(o=e.y-t.bottom)>r&&!i&&(o=0)),o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e,t,i,n){var r=(0,o.getOverlapX)(e,t,i,n);if(i||0===r||e.immovable&&t.immovable)return 0!==r;var s=e.velocity.x,a=t.velocity.x;if(e.immovable||t.immovable)e.immovable?(t.x+=r,t.velocity.x=s-a*t.bounce.x,e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y)):(e.x-=r,e.velocity.x=a-s*e.bounce.x,t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y));else{r*=.5,e.x-=r,t.x+=r;var l=Math.sqrt(a*a*t.mass/e.mass)*(a>0?1:-1),u=Math.sqrt(s*s*e.mass/t.mass)*(s>0?1:-1),c=.5*(l+u);l-=c,u-=c,e.velocity.x=c+l*e.bounce.x,t.velocity.x=c+u*t.bounce.x}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=i(1)},function(e,t,i){"use strict";function n(e,t,i,n){var r=(0,o.getOverlapY)(e,t,i,n);if(i||0===r||e.immovable&&t.immovable)return 0!==r;var s=e.velocity.y,a=t.velocity.y;if(e.immovable||t.immovable)e.immovable?(t.y+=r,t.velocity.y=s-a*t.bounce.y,e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x)):(e.y-=r,e.velocity.y=a-s*e.bounce.y,t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x));else{r*=.5,e.y-=r,t.y+=r;var l=Math.sqrt(a*a*t.mass/e.mass)*(a>0?1:-1),u=Math.sqrt(s*s*e.mass/t.mass)*(s>0?1:-1),c=.5*(l+u);l-=c,u-=c,e.velocity.y=c+l*e.bounce.y,t.velocity.y=c+u*t.bounce.y}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=i(1)},function(e,t,i){"use strict";/**
 * @author
 * @copyright
 * @license
 */
function n(e,t){return!(e.right<=t.position.x)&&(!(e.bottom<=t.position.y)&&(!(e.position.x>=t.right)&&!(e.position.y>=t.bottom)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(3),a=n(s),l=i(2),u=n(l),c=function(){function e(t){o(this,e),this.world=t,this.tilemap=t.tilemap}return r(e,[{key:"modifier",value:function(e){this.tilemap.addModifier(e)}},{key:"collider",value:function(e,t){var i=Array.isArray(e),n=Array.isArray(t);if(i||n)if(!i&&n)if(t[0]instanceof a.default)this.tilemap.addCollision(e,t);else for(var o=0;o<t.length;o++)e instanceof u.default&&t[o]instanceof u.default&&this.world.addCollider(e,t[o]);else if(i&&!n)if(t[0]instanceof a.default)for(var r=0;r<e.length;r++)this.tilemap.addCollision(e[r],[t]);else for(var s=0;s<e.length;s++)this.world.addCollider(e[s],t);else for(var l=0;l<e.length;l++)if(t[0]instanceof a.default)for(var c=0;c<e.length;c++)this.tilemap.addCollision(e[c],t);else for(var f=0;f<t.length;f++)e[l]instanceof u.default&&t[f]instanceof u.default&&this.world.addCollider(e[l],t[f]);else e instanceof u.default&&(t instanceof a.default?this.tilemap.addCollision(e,[t]):t instanceof u.default&&this.world.addCollider(e,t))}},{key:"force",value:function(e,t){var i=Array.isArray(e),n=Array.isArray(t);if(i||n)if(!i&&n)e instanceof u.default&&this.tilemap.addForce(e,t);else if(i&&!n)for(var o=0;o<e.length;o++)e[o]instanceof u.default&&t instanceof a.default&&this.tilemap.addForce(e[o],[t]);else for(var r=0;r<e.length;r++)e[r]instanceof u.default&&this.tilemap.addForce(e[r],t);else e instanceof u.default&&t instanceof a.default&&this.tilemap.addForce(e,[t])}},{key:"inertia",value:function(e,t){var i=Array.isArray(e),n=Array.isArray(t);if(i||n)if(!i&&n)e instanceof u.default&&this.tilemap.addInertia(e,t);else if(i&&!n)for(var o=0;o<e.length;o++)e[o]instanceof u.default&&this.tilemap.addInertia(e[o],[t]);else for(var r=0;r<e.length;r++)e[r]instanceof u.default&&this.tilemap.addInertia(e[r],t);else e instanceof u.default&&t instanceof a.default&&this.tilemap.addInertia(e,[t])}}]),e}();t.default=c}])});